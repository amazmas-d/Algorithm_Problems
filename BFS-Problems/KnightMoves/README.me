# тЩЮ Knight moves (BFS in 2D Grid) тАФ ржирж╛ржЗржЯрзЗрж░ рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржкрже

## ЁЯФН рж╕ржорж╕рзНржпрж╛ржЯрж┐ ржХрзА?

ржЖржорж╛ржжрзЗрж░ ржПржЗ рж╕ржорж╕рзНржпрж╛ржЯрж┐рж░ ржХрж╛ржЬ рж╣рж▓рзЛ ржПржХржЯрж┐ ржХрзНрж▓рж╛рж╕рж┐ржХ **тАШshortest pathтАЩ** ржПрж░ рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛ред  
рж╕ржорж╕рзНржпрж╛ржЯрж┐рж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж▓ржХрзНрж╖рзНржп рж╣рж▓рзЛ: ржжрж╛ржмрж╛ржмрзЛрж░рзНржбрзЗрж░ ржжрзБржЯрж┐ рж╕рзНржХрзЯрж╛рж░ **a** ржПржмржВ **b** ржжрзЗржУрзЯрж╛ ржерж╛ржХрж▓рзЗ,  
**a ржерзЗржХрзЗ b рждрзЗ ржкрзМржБржЫрж╛рждрзЗ ржирж╛ржЗржЯрзЗрж░ рж╕рж░рзНржмржирж┐ржорзНржи ржХрждржЧрзБрж▓рзЛ ржЪрж╛рж▓ рж▓рж╛ржЧржмрзЗ!**

ржПржЗ рж╕ржорж╕рзНржпрж╛ржЯрж┐ржХрзЗ ржПржХржЯрж┐ **unweighted graph** ржПрж░ рж╕ржВржХрзНрж╖рж┐ржкрзНрждрждржо ржкрже ржЦрзЛржБржЬрж╛рж░ рж╕ржорж╕рзНржпрж╛ рж╣рж┐рж╕рж╛ржмрзЗ ржоржбрзЗрж▓ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

### ЁЯОп ржоржбрзЗрж▓рж┐ржВ

| ржзрж╛рж░ржгрж╛ | ржЕрж░рзНрже |
|--------|------|
| **ржирзЛржб (Nodes)** | ржжрж╛ржмрж╛ржмрзЛрж░рзНржбрзЗрж░ рзмрзкржЯрж┐ рж╕рзНржХрзЯрж╛рж░ рж╣рж▓рзЛ ржПржЗ ржЧрзНрж░рж╛ржлрзЗрж░ ржирзЛржб |
| **ржПржЬ (Edges)** | ржжрзБржЯрж┐ рж╕рзНржХрзЯрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ ржмрзИржз ржирж╛ржЗржЯрзЗрж░ ржЪрж╛рж▓ рж╣рж▓рзЛ ржПржХржЯрж┐ ржПржЬ |
| **Cost** | ржкрзНрж░рждрж┐ржЯрж┐ ржЪрж╛рж▓рзЗрж░ cost рж╕ржорж╛ржи (ржЕрж░рзНржерж╛рзО рзз ржЪрж╛рж▓) |

рждрж╛ржЗ ржПржЗ ржзрж░ржирзЗрж░ ржЧрзНрж░рж╛ржлрзЗ рж╕ржВржХрзНрж╖рж┐ржкрзНрждрждржо ржкрже ржЦрзЛржБржЬрж╛рж░ ржЬржирзНржп рж╕ржмржЪрзЗрзЯрзЗ ржЖржжрж░рзНрж╢ ржЕрзНржпрж╛рж▓ржЧрж░рж┐ржжржо рж╣рж▓рзЛ  
**Breadth-First Search (BFS)**ред

---

## ЁЯза BFS ржХрзА?

**BFS**, ржмрж╛ **ржмрзНрж░рзЗржбрже-ржлрж╛рж░рзНрж╕рзНржЯ рж╕рж╛рж░рзНржЪ**, рж╣рж▓рзЛ ржПржХржЯрж┐ ржЧрзНрж░рж╛ржл ржЯрзНрж░рж╛ржнрж╛рж░рзНрж╕рж╛рж▓ ржЕрзНржпрж╛рж▓ржЧрж░рж┐ржжржо ржпрж╛ рж╢рзБрж░рзБ ржирзЛржб ржерзЗржХрзЗ рж╢рзБрж░рзБ ржХрж░рзЗ  
ржЧрзНрж░рж╛ржлржЯрж┐ржХрзЗ ржжрзВрж░рждрзНржм ржЕржирзБржпрж╛рзЯрзА рж╕рзНрждрж░-рж╕рзНрждрж░рзЗ (**level by level**) search ржХрж░рзЗред  

ржПржЯрж┐ **Queue** ржбрзЗржЯрж╛ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржмржВ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ рж╕ржВржХрзНрж╖рж┐ржкрзНрждрждржо ржкржерзЗ ржкрзМржБржЫрж╛ржирзЛрж░ ржЖржЧрзЗ  
ржПржЯрж┐ ржХрзЛржирзЛ ржжрзАрж░рзНржШ ржкржерзЗ ржпрж╛ржмрзЗ ржирж╛ред  

ржУржЬржирж╣рзАржи ржЧрзНрж░рж╛ржлрзЗ (ржпрзЗржоржи ржПржЗ ржирж╛ржЗржЯрзЗрж░ рж╕ржорж╕рзНржпрж╛), ржПржЯрж┐ржЗ рж╕ржВржХрзНрж╖рж┐ржкрзНрждрждржо ржкрже ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рж╛рж░ рж╕ржмржЪрзЗржпрж╝рзЗ ржХрж╛рж░рзНржпржХрж░ ржЙржкрж╛рзЯред

---

## ЁЯО▓ ржмрзЛрж░рзНржб ржПржмржВ ржирж╛ржЗржЯрзЗрж░ ржЪрж╛рж▓ рж░рж┐ржкрзНрж░рзЗржЬрзЗржирзНржЯ ржХрж░рж╛

BFS ржЕрзНржпрж╛рж▓ржЧрж░рж┐ржжржо ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржЖржЧрзЗ ржЖржорж╛ржжрзЗрж░ ржЧрзНрж░рж╛ржлржЯрж┐ржХрзЗ ржХрзЛржбрзЗ рж░рж┐ржкрзНрж░рзЗржЬрзЗржирзНржЯ ржХрж░рждрзЗ рж╣ржмрзЗ,  
ржЕрж░рзНржерж╛рзО ржПржХржЯрж┐ ржирж╛ржЗржЯ ржХрзАржнрж╛ржмрзЗ ржПржХ рж╕рзНржХрзЯрж╛рж░ ржерзЗржХрзЗ ржЕржирзНржп рж╕рзНржХрзЯрж╛рж░рзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ рждрж╛ рж╕ржВржЬрзНржЮрж╛рзЯрж┐ржд ржХрж░рждрзЗ рж╣ржмрзЗред

### ржирж╛ржЗржЯрзЗрж░ рзоржЯрж┐ рж╕ржорзНржнрж╛ржмрзНржп ржЪрж╛рж▓

(i, j) ржкржЬрж┐рж╢ржи ржерзЗржХрзЗ ржирж╛ржЗржЯ рж╕рж░рзНржмрзЛржЪрзНржЪ рзоржЯрж┐ ржнрж┐ржирзНржи рж╕рзНржХрзЯрж╛рж░рзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ:

(i-2, j+1)
(i-2, j-1)
(i-1, j+2)
(i-1, j-2)
(i+1, j+2)
(i+1, j-2)
(i+2, j+1)
(i+2, j-1)

### ржХрзЛржбрзЗ рж░рзВржкрж╛ржирзНрждрж░

```cpp
// kr[] ржЕрзНржпрж╛рж░рзЗ рзоржЯрж┐ рж╕ржорзНржнрж╛ржмрзНржп рж╕рж╛рж░рж┐рж░ ржкрж░рж┐ржмрж░рзНрждржи рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ 
const int kr[] = {2, 2, -2, -2, 1, 1, -1, -1}; 

// kc[] ржЕрзНржпрж╛рж░рзЗ рзоржЯрж┐ рж╕ржорзНржнрж╛ржмрзНржп ржХрж▓рж╛ржорзЗрж░ ржкрж░рж┐ржмрж░рзНрждржи рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ 
const int kc[] = {1, -1, 1, -1, 2, -2, 2, -2};
ржПржЦржи, i = 0 ржерзЗржХрзЗ 7 ржкрж░рзНржпржирзНржд ржПржХржЯрж┐ рж▓рзБржк ржЪрж╛рж▓рж┐рзЯрзЗ  
`new_r = r + kr[i]` ржПржмржВ `new_c = c + kc[i]` ржХрж░рж▓рзЗржЗ  
ржЖржорж░рж╛ ржпрзЗржХрзЛржирзЛ рж╕рзНржХрзЯрж╛рж░ (r, c) ржерзЗржХрзЗ рзоржЯрж┐ рж╕ржорзНржнрж╛ржмрзНржп ржирждрзБржи рж╕рзНржХрзЯрж╛рж░ ржкрзЗрзЯрзЗ ржпрж╛ржмред

---

тЪЩя╕П **Breadth-First Search (BFS)** ржПрж░ ржмрзНржпржмрж╣рж╛рж░  

BFS ржПржЗ рж╕ржорж╕рзНржпрж╛рж░ ржЬржирзНржп ржЙржкржпрзБржХрзНржд ржХрж╛рж░ржг ржПржЯрж┐ ржЧрзНрж░рж╛ржлржЯрж┐ржХрзЗ layer ржЕржирзБржпрж╛рзЯрзА explore ржХрж░рзЗред

- **Layer 0:** рж╢рзБрж░рзБрж░ рж╕рзНржХрзЯрж╛рж░ (ржжрзВрж░рждрзНржм рзж)
- **Layer 1:** рзз ржЪрж╛рж▓рзЗ ржкрзМржБржЫрж╛ржирзЛ ржпрж╛рзЯ ржПржоржи рж╕ржм рж╕рзНржХрзЯрж╛рж░
- **Layer 2:** рзи ржЪрж╛рж▓рзЗ ржкрзМржБржЫрж╛ржирзЛ ржпрж╛рзЯ ржПржоржи рж╕ржм рж╕рзНржХрзЯрж╛рж░  
... ржПржмржВ ржПржнрж╛ржмрзЗ ржЪрж▓рждрзЗ ржерж╛ржХрзЗред

ржпрзЗржЗ ржорзБрж╣рзВрж░рзНрждрзЗ ржЖржорж░рж╛ ржкрзНрж░ржержоржмрж╛рж░ ржЖржорж╛ржжрзЗрж░ ржЧржирзНрждржмрзНржп рж╕рзНржХрзЯрж╛рж░рзЗ ржкрзМржБржЫрж╛ржм,  
ржЖржорж░рж╛ ржирж┐рж╢рзНржЪрж┐ржд ржерж╛ржХрждрзЗ ржкрж╛рж░рж┐ ржпрзЗ ржПржЯрж┐ржЗ **рж╕ржВржХрзНрж╖рж┐ржкрзНрждрждржо ржкржеред**

---

ЁЯзй **ржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржЕрзНржпрж╛рж░рзЗ**

| ржирж╛ржо | ржХрж╛ржЬ |
|-----|------|
| `dist[8][8]` | рж╢рзБрж░рзБрж░ рж╕рзНржХрзЯрж╛рж░ ржерзЗржХрзЗ ржЕржирзНржп ржкрзНрж░рждрж┐ржЯрж┐ рж╕рзНржХрзЯрж╛рж░рзЗрж░ ржжрзВрж░рждрзНржм (ржирзНржпрзВржирждржо ржЪрж╛рж▓рзЗрж░ рж╕ржВржЦрзНржпрж╛) |
| `color[8][8]` | ржкрзНрж░рждрж┐ржЯрж┐ рж╕рзНржХрзЯрж╛рж░рзЗрж░ ржЕржмрж╕рзНржерж╛ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗ |
| `queue<pair<int,int>> q` | ржкрж░ржмрж░рзНрждрзА ржзрж╛ржкрзЗ ржнрж┐ржЬрж┐ржЯ ржХрж░рж╛рж░ ржЬржирзНржп рж╕рзНржХрзЯрж╛рж░ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ |

---

**color** ржПрж░ ржорж╛ржирзЗрж░ ржЕрж░рзНрже:

- `-1` тЖТ рж╕рж╛ржжрж╛ (ржнрж┐ржЬрж┐ржЯ ржХрж░рж╛ рж╣рзЯржирж┐)  
- `1` тЖТ ржзрзВрж╕рж░ (queue рждрзЗ ржЖржЫрзЗ)  
- `2` тЖТ ржХрж╛рж▓рзЛ (ржкрзНрж░рж╕рзЗрж╕ ржХрж░рж╛ рж╢рзЗрж╖)
ЁЯзо **PseudoCode**

FUNCTION bfs_knight(startR, startC, endR, endC):
N = 8
DEFINE dist[N][N], color[N][N]
DEFINE Queue Q
FOR r FROM 0 TO N-1:
    FOR c FROM 0 TO N-1:
        dist[r][c] = INFINITY
        color[r][c] = -1

dist[startR][startC] = 0
color[startR][startC] = 1
ENQUEUE (startR, startC)

WHILE Q IS NOT EMPTY:
    (r, c) = DEQUEUE()

    IF (r, c) == (endR, endC):
        RETURN dist[r][c]

    FOR i FROM 0 TO 7:
        newR = r + kr[i]
        newC = c + kc[i]

        IF newR,newC IS ON BOARD AND color[newR][newC] == -1:
            color[newR][newC] = 1
            dist[newR][newC] = dist[r][c] + 1
            ENQUEUE(newR, newC)

    color[r][c] = 2

RETURN -1

---

ЁЯзн **ржЙржжрж╛рж╣рж░ржг:** `a1 тЖТ h8`

| рж╕рзНржХрзЯрж╛рж░ | ржХрзЛ-ржЕрж░рзНржбрж┐ржирзЗржЯ |
|--------|--------------|
| a1 | (0, 0) |
| h8 | (7, 7) |

**ржлрж▓рж╛ржлрж▓:**  
a1 ржерзЗржХрзЗ h8 ржкрзМржБржЫрж╛рждрзЗ ржирзНржпрзВржирждржо **рзмржЯрж┐ ржЪрж╛рж▓** рж▓рж╛ржЧржмрзЗред

BFS рж╕рзНрждрж░ ржЕржирзБржпрж╛рзЯрзА ржЪрж▓рзЗ ржмрж▓рзЗ ржПржЯрж┐ **рж╕ржВржХрзНрж╖рж┐ржкрзНрждрждржо ржкрже** ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ тЬЕ

